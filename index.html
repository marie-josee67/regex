<!DOCTYPE html>
<html lang="fr-fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>expression régulière</title>
</head>
<body>
    <h1>regex</h1>
    <script>
        const strInput = "Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nihil minus ";
        const strInput2 = "Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nihil minus ";
        const strInput3 = "0123456789";
        const strEmail = "exemple@mail.com";
        const strEmail2 = "invalid-email.com";

        const regexStart = /^Lorem/;
        const regexPhone = /tel : \d{10}/;

        // tester  s'il y a un O 
       /* const regexO = /[oO]/;
        const regexX = /[xX]/;

        console.log(regexO().test(strInput));
        console.log(regexX().test(strInput));

        console.log(regexStart.test(strInput));
        console.log(regexStart.test(strInput2));

        console.log(validateEmail(strEmail)); // true
        console.log(validateEmail(strEmail2)); // false
        // exos

        // exo 3 code postale 
        const regexPostale = /^[0-9]{5}$/;

        // exo 4 date
        const regexDate = /^[0-9]{6}$/;*/


        // corection du formateur
        //REGEX 1 : Vérifier si une chaine de caractères est une adresse valide

        const emailRegex = /^[\w.-]+@[a-zA-Z\d.-]+\.[a-zA-Z]{2,6}$/;
        const validateEmail = (email) => emailRegex.test(email);

        console.log(validateEmail("exemple@mail.com")); // true
        console.log(validateEmail("invalid-email.com")); // false


        //REGEX 2 : Vérifier qu'un numéro de téléphone est au format français (10 chiffres, optionnellement avec un +33 au début)

        const phoneRegex = /^(\+33|0)[1-9](\d{2}){4}$/;
        const validatePhone = (phone) => phoneRegex.test(phone);

        console.log(validatePhone("+33612345678")); // true
        console.log(validatePhone("0612345678")); // true
        console.log(validatePhone("1234567890")); // false

        //REGEX 3 : Vérifier si une chaîne de caractères est un code postal français (5 chiffres)

        const postalCodeRegex = /^\d{5}$/;
        const validatePostalCode = (postalCode) => postalCodeRegex.test(postalCode);

        console.log(validatePostalCode("75001")); // true
        console.log(validatePostalCode("A2345")); // false


        //REGEX 4 : Vérifier si une date est au format français JJ/MM/AAAA. On ne vérifiera pas si la date existe ou non, uniquement son format
        const dateRegex = /^(0[1-9]|[12]\d|3[01])\/(0[1-9]|1[0-2])\/\d{4}$/;
        const validateDate = (date) => dateRegex.test(date);

        console.log(validateDate("12/11/2024")); // true
        console.log(validateDate("31/13/2024")); // false

        //REGEX 5 : Extraire tous les hashtags d'une chaîne de caractères. (utiliser la fonction « match »)
        const hashtagRegex = /#\w+/g;
        const findHashtags = (text) => text.match(hashtagRegex) || [];

        console.log(findHashtags("Aujourd'hui est #fantastique avec #JavaScript et #regex!")); // ['#fantastique', '#JavaScript', '#regex']


        //REGEX 6 : Simplifier une chaîne en remplaçant tous les espaces multiples par un seul. (utiliser la fonction « replace »)
        const cleanSpaces = (text) => text.replace(/\s+/g, ' ');

        console.log(cleanSpaces("Texte    avec   des   espaces   multiples.")); // "Texte avec des espaces multiples."

        // exo7 perso pas encore la correction
        //REGEX 7 : Extraire toutes les adresses e-mail présentes dans une chaîne de caractères. (utiliser la fonction « match »)
        const extratRegex = /\w+@+\w+(?!@)+\w.{4}/g;
        //const emailRegex = /^[\w.-]+@[a-zA-Z\d.-]+\.[a-zA-Z]{2,6}$/;

        const extractEmails = (text) => text.match(extratRegex) || [];
        console.log(extractEmails("Contactez-nous à contact@exemple.com ou info@site.com")); // ['contact@exemple.com', 'info@site.com']

        // solution chatGPT
        function extractEmail(inputString) {
            const emaiRegex = /[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g;
            return inputString.match(emaiRegex) || [];
        }
        console.log(extractEmail("Contactez-nous à sos@exemple.com ou portfolio@site.com"));

    </script>
</body>
</html>